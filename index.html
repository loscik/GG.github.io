<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Êš Garadise É</title>

<style>          
  :root{
  --pink:#ff6ecf;      /* æ›´å°‘å¥³ç«ç²‰ */
  --blue:#a7f0ff;      /* å¥¶è“ */
  --yellow:#fff3a3;    /* å¥¶é»„ */
  --bg1:#fffafd;       /* æ¥è¿‘ç™½ */
  --bg2:#ffe9f6;       /* ç²‰ç™½åº• */
}
    --glass:rgba(255,255,255,.10);
    --glass2:rgba(255,255,255,.14);
    --line:rgba(255,255,255,.22);
    --muted:rgba(255,255,255,.72);
    --shadow:0 22px 70px rgba(0,0,0,.45);
    --r:22px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:#fff;
    font-family: ui-sans-serif, system-ui, -apple-system, "PingFang TC","PingFang HK",
                 "Microsoft JhengHei","Noto Sans TC","Heiti TC", Arial, sans-serif;
    letter-spacing:.2px;
    background:
  radial-gradient(1200px 800px at 12% 10%, #ffd6f0, transparent 60%),
  radial-gradient(1000px 700px at 86% 18%, #d6f6ff, transparent 55%),
  radial-gradient(900px 700px at 50% 92%, #fff6c9, transparent 60%),
  linear-gradient(#ffffff,#fff5fb);
    overflow-x:hidden;
  }

  /* âœ¨ sparkle dust */
  body:before{
    content:"";
    position:fixed; inset:0;
    background-image:
      radial-gradient(circle at 12% 18%, rgba(255,255,255,.22) 0 1px, transparent 1px),
      radial-gradient(circle at 44% 72%, rgba(255,255,255,.18) 0 1px, transparent 1px),
      radial-gradient(circle at 78% 30%, rgba(255,255,255,.16) 0 1px, transparent 1px),
      radial-gradient(circle at 64% 10%, rgba(255,255,255,.12) 0 1px, transparent 1px);
    background-size: 260px 260px, 320px 320px, 420px 420px, 520px 520px;
    mix-blend-mode:screen;
    opacity:.35;
    pointer-events:none;
  }

  a{color:inherit;text-decoration:none}
  .wrap{max-width:1160px;margin:0 auto;padding:18px 16px 80px}

  /* top pill */
  .top{
    display:flex;justify-content:space-between;align-items:center;gap:10px;
    padding:12px 14px;border:1px solid var(--line);border-radius:999px;
    background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.06));
    backdrop-filter: blur(12px);
    box-shadow: var(--shadow);
    position:sticky;top:12px;z-index:30;
  }
  .brand{display:flex;align-items:center;gap:10px;font-weight:1000}
  .orb{
    width:18px;height:18px;border-radius:999px;
    background: radial-gradient(circle at 30% 30%, #fff 0 18%, rgba(255,255,255,.18) 20%, transparent 55%),
                conic-gradient(from 180deg,var(--pink),var(--blue),var(--yellow),var(--pink));
    box-shadow:0 0 22px rgba(255,63,216,.25), 0 0 20px rgba(121,231,255,.18);
  }
  .nav{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .chip{
    padding:8px 12px;border:1px solid var(--line);border-radius:999px;
    background:rgba(0,0,0,.22);color:var(--muted);font-size:13px;
    cursor:pointer; user-select:none;
  }
  .chip:hover{color:#fff;transform:translateY(-1px)}
  .chip.on{background:linear-gradient(135deg,rgba(255,63,216,.30),rgba(121,231,255,.18));color:#fff}
  .chip.tiny{padding:7px 10px;font-size:12px}

  /* hero */
  .hero{
    margin-top:14px;
    border:1px solid var(--line);
    border-radius: var(--r);
    background:
      radial-gradient(900px 420px at 15% 10%, rgba(255,63,216,.18), transparent 60%),
      radial-gradient(800px 460px at 92% 14%, rgba(121,231,255,.18), transparent 55%),
      linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.06));
    backdrop-filter: blur(12px);
    box-shadow: var(--shadow);
    overflow:hidden; position:relative;
  }
  /* chrome shine */
  .hero:after{
    content:"";
    position:absolute; inset:-2px;
    background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.16) 18%, transparent 36%, rgba(255,255,255,.10) 52%, transparent 68%, rgba(255,255,255,.16) 86%, transparent 100%);
    transform: translateX(-35%);
    animation: shine 6s linear infinite;
    pointer-events:none;
    opacity:.85;
  }
  @keyframes shine{0%{transform:translateX(-45%)}100%{transform:translateX(45%)}}
  .heroInner{padding:22px 22px 18px}
  .kicker{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:13px}
  .tag{
    padding:6px 10px;border-radius:999px;
    border:1px dashed rgba(255,255,255,.28);
    background:rgba(0,0,0,.18);
  }
  h1{margin:12px 0 8px;font-size:52px;line-height:1.02;letter-spacing:.3px}
  .nameGlow{
    background: linear-gradient(90deg, var(--blue), #fff, var(--pink));
    -webkit-background-clip:text;background-clip:text;color:transparent;
    filter: drop-shadow(0 0 16px rgba(255,63,216,.18));
  }
  .sub{margin:0;color:var(--muted);line-height:1.7;max-width:72ch}
  .heroRow{
    margin-top:14px;
    display:flex;gap:10px;flex-wrap:wrap;align-items:center;
  }
  .btn{
    display:inline-flex;align-items:center;gap:10px;
    padding:12px 14px;border-radius:16px;
    border:1px solid var(--line);
    background:rgba(0,0,0,.22);
    box-shadow:0 10px 26px rgba(0,0,0,.25);
    font-weight:900;font-size:14px;cursor:pointer;
  }
  .btn.primary{border:none;background:linear-gradient(135deg,rgba(255,63,216,.95),rgba(138,92,255,.95))}
  .btn .dot{width:10px;height:10px;border-radius:999px;background:var(--blue);box-shadow:0 0 16px rgba(121,231,255,.55)}
  .btn.primary .dot{background:#fff;box-shadow:none}
  .btn:hover{transform:translateY(-1px)}
  .counter{color:rgba(255,255,255,.6);font-size:12px}

  /* panel */
  .panel{
    margin-top:14px;
    border:1px solid var(--line);
    border-radius: var(--r);
    background:linear-gradient(180deg,rgba(255,255,255,.10),rgba(255,255,255,.06));
    backdrop-filter: blur(12px);
    box-shadow: var(--shadow);
    overflow:hidden;
  }
  .panelHead{
    padding:14px 16px;
    display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
    border-bottom:1px solid rgba(255,255,255,.12);
  }
  .panelTitle{
    font-size:12px;letter-spacing:.18em;text-transform:uppercase;color:rgba(255,255,255,.75);
  }
  .filters{display:flex;gap:8px;flex-wrap:wrap}

  /* gallery grid */
  .grid{
    padding:16px;
    display:grid;
    grid-template-columns: repeat(4, 1fr);
    gap:12px;
  }
  @media (max-width:1000px){.grid{grid-template-columns: repeat(3, 1fr)}}
  @media (max-width:760px){.grid{grid-template-columns: repeat(2, 1fr)} h1{font-size:40px}}
  @media (max-width:460px){.grid{grid-template-columns: 1fr}}

  .tile{
    border-radius:18px;
    border:1px solid rgba(255,255,255,.14);
    background:rgba(0,0,0,.18);
    overflow:hidden;
    cursor:pointer;
    position:relative;
    box-shadow:0 12px 30px rgba(0,0,0,.30);
    transform: translateZ(0);
  }
  .tile:hover{transform:translateY(-2px)}
  .thumb{
    width:100%; aspect-ratio: 1 / 1; object-fit:cover; display:block;
    filter:saturate(1.05) contrast(1.02);
  }
  .cap{
    padding:10px 12px;
    display:flex;justify-content:space-between;gap:10px;align-items:center;
  }
  .cap b{font-size:13px}
  .cap span{font-size:12px;color:rgba(255,255,255,.65)}
  .badge{
    position:absolute; top:10px; left:10px;
    padding:6px 10px; border-radius:999px;
    background:rgba(0,0,0,.28);
    border:1px solid rgba(255,255,255,.18);
    font-size:12px; color:rgba(255,255,255,.85);
    backdrop-filter: blur(10px);
  }
  .sticker{
    position:absolute; right:10px; top:10px;
    width:34px; height:34px; border-radius:12px;
    border:1px solid rgba(255,255,255,.18);
    background:rgba(255,255,255,.08);
    backdrop-filter: blur(10px);
    display:grid; place-items:center;
    box-shadow:0 10px 26px rgba(0,0,0,.25);
    font-size:16px;
  }

  /* pagination */
  .pager{
    padding:14px 16px;
    display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
    border-top:1px solid rgba(255,255,255,.12);
  }
  .pageNums{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .pageBtn{
    padding:8px 12px;border-radius:999px;border:1px solid var(--line);
    background:rgba(0,0,0,.22);color:rgba(255,255,255,.78);
    cursor:pointer;font-size:13px;font-weight:900;
  }
  .pageBtn:hover{color:#fff;transform:translateY(-1px)}
  .pageBtn.on{background:linear-gradient(135deg,rgba(255,63,216,.30),rgba(121,231,255,.20));color:#fff}
  .pageBtn:disabled{opacity:.5;cursor:not-allowed}

  /* modal */
  .modal{
    position:fixed; inset:0; z-index:60;
    display:none; align-items:center; justify-content:center;
    background:rgba(0,0,0,.62);
    padding:18px;
  }
  .modal.on{display:flex}
  .modalCard{
    width:min(980px, 96vw);
    border-radius:24px;
    border:1px solid rgba(255,255,255,.20);
    background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.06));
    backdrop-filter: blur(14px);
    box-shadow:0 28px 90px rgba(0,0,0,.55);
    overflow:hidden;
  }
  .modalTop{
    padding:12px 14px;
    display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
    border-bottom:1px solid rgba(255,255,255,.12);
  }
  .modalTop b{font-size:14px}
  .x{
    width:38px;height:38px;border-radius:14px;
    border:1px solid rgba(255,255,255,.18);
    background:rgba(0,0,0,.20);
    cursor:pointer;font-weight:900;color:#fff;
  }
  .modalBody{display:grid;grid-template-columns: 1.4fr .6fr}
  @media (max-width:900px){.modalBody{grid-template-columns:1fr}}
  .modalImg{width:100%;height:100%;max-height:70vh;object-fit:contain;background:rgba(0,0,0,.22)}
  .side{padding:14px}
  .meta{color:rgba(255,255,255,.70);font-size:13px;line-height:1.7}
  .modalActions{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}
  .note{margin-top:10px;color:rgba(255,255,255,.55);font-size:12px;line-height:1.6}

  /* floating stickers layer */
  #floatLayer{
    position:fixed; inset:0; pointer-events:none; z-index:10;
    overflow:hidden;
  }
  .floatSticker{
    position:absolute;
    font-size:22px;
    opacity:.75;
    filter: drop-shadow(0 0 14px rgba(255,63,216,.18));
    animation: floatUp linear infinite;
  }
  @keyframes floatUp{
    from{ transform: translateY(120vh) rotate(0deg); opacity:.0; }
    10%{opacity:.75}
    to{ transform: translateY(-20vh) rotate(360deg); opacity:.0; }
  }

  /* mouse trail */
  #trailLayer{
    position:fixed; inset:0; pointer-events:none; z-index:50;
  }
  .trailDot{
    position:absolute;
    width:10px;height:10px;border-radius:999px;
    background: radial-gradient(circle at 30% 30%, #fff 0 30%, rgba(255,255,255,.18) 40%, transparent 60%),
                conic-gradient(from 180deg,var(--pink),var(--blue),var(--yellow),var(--pink));
    box-shadow:0 0 16px rgba(121,231,255,.22), 0 0 18px rgba(255,63,216,.22);
    transform: translate(-50%,-50%);
    opacity:.0;
    transition: opacity .25s ease;
  }

  .footer{margin-top:14px;text-align:center;color:rgba(255,255,255,.55);font-size:12px}
</style>
</head>

<body>
  <!-- æ¼‚æµ®è²¼ç´™å±¤ / é¼ æ¨™æ‹–å°¾å±¤ -->
  <div id="floatLayer"></div>
  <div id="trailLayer"></div>

  <div class="wrap">
    <div class="top">
      <div class="brand"><span class="orb"></span> GG <span style="color:var(--muted);font-weight:900;font-size:13px;">â™¡ ä½œå“ç‰†æ¨¡å¼</span></div>
      <div class="nav">
        <span class="chip on" id="navWall">ä½œå“ç‰†</span>
        <span class="chip" id="navAbout">é—œæ–¼æˆ‘</span>
        <span class="chip" id="navLinks">é€£çµ</span>
        <span class="chip" id="navContact">è¯çµ¡</span>
        <span class="chip tiny" id="toggleSound">ğŸ”Š éŸ³æ•ˆï¼šé–‹</span>
        <span class="chip tiny" id="toggleFX">âœ¨ ç‰¹æ•ˆï¼šé–‹</span>
      </div>
    </div>

    <section class="hero">
      <div class="heroInner">
        <div class="kicker">
          <span class="tag">ğŸ¶ ä¾†ç¦</span>
          <span class="tag">ğŸª è‡ªæ‹</span>
          <span class="tag">ğŸï¸ æ—…è¡Œ</span>
          <span class="tag">ğŸ«§ æ—¥å¸¸</span>
          <span class="tag">ğŸ’„ å¦å®¹</span>
          <span class="tag">ğŸ’ äº®æ™¶æ™¶</span>
        </div>
        <h1>æ­¡è¿ä¾†åˆ° <span class="nameGlow">GG</span> çš„ç‰†ã€‚</h1>
        <h1>Here is <span class="nameGlow">Garadiseã€‚</h1>
        <p class="sub">
          é€™è£¡æ”¶é›†ï¼šæˆ‘çš„è‡ªæ‹ã€æ—…è¡Œé¢¨æ™¯ã€ä¾†ç¦ç¬é–“ã€æ—¥å¸¸ç¢ç‰‡ã€å¦å®¹è¨˜éŒ„ã€‚
          é»é–‹å¡ç‰‡å¯å¤§åœ–ç€è¦½ï¼Œæ”¯æ´ Prev / Next èˆ‡åˆ†é ã€‚
        </p>

        <div class="heroRow">
          <button class="btn primary" id="btnRandom"><span class="dot"></span>éš¨æ©Ÿé–‹ä¸€å¼µ</button>
          <button class="btn" id="btnTop"><span class="dot"></span>å›åˆ°é ‚ç«¯</button>
          <div class="counter" id="counterText">0 å¼µ â€¢ ç¬¬ 1/1 é </div>
        </div>
      </div>
    </section>

    <section class="panel" id="panel">
      <div class="panelHead">
        <div class="panelTitle">Gallery / Wall</div>
        <div class="filters" id="tagFilters"></div>
      </div>

      <div class="grid" id="grid"></div>

      <div class="pager">
        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
          <button class="pageBtn" id="prevBtn">Prev</button>
          <button class="pageBtn" id="nextBtn">Next</button>
        </div>
        <div class="pageNums" id="pageNums"></div>
      </div>
    </section>

    <div class="footer">Â© GG âœ§ y2k wall â€¢ ç«ç²‰/æ·ºè—/å«©é»ƒ/é»‘ç™½ â€¢ é–ƒé–ƒç™¼å…‰ âœ¨</div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modalCard">
      <div class="modalTop">
        <b id="modalTitle">Title</b>
        <div style="display:flex;gap:8px;align-items:center;">
          <button class="pageBtn" id="mPrev">Prev</button>
          <button class="pageBtn" id="mNext">Next</button>
          <button class="x" id="mClose" aria-label="close">âœ•</button>
        </div>
      </div>
      <div class="modalBody">
        <img class="modalImg" id="modalImg" alt="work"/>
        <div class="side">
          <div class="meta" id="modalMeta"></div>
          <div class="modalActions">
            <a class="pageBtn" id="mOpen" target="_blank" rel="noreferrer">Open</a>
            <a class="pageBtn" id="mDownload" download>Download</a>
          </div>
          <div class="note">
            æŠŠä½ çš„ç…§ç‰‡æ”¾åˆ° <b>/assets/</b>ï¼Œå†åœ¨æœ¬æª”æ¡ˆçš„ <b>GALLERY</b> é™£åˆ—å¡«å…¥æª”åå³å¯ã€‚
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/** =========================
 * âœ… æŠŠä½ çš„ç…§ç‰‡æ”¾åˆ°å€‰åº« /assets/
 * ç„¶å¾Œåœ¨é€™è£¡å¡«æª”åèˆ‡åˆ†é¡ï¼š
 * categories: raifu / selfie / travel / daily / makeup
 * tags å¯éš¨æ„åŠ ï¼šbling / heart / polka / fish / undersea / leopard / denim / pink / blue / yellow / black / white
 * ========================= */
const GALLERY = [
  // å…ˆæ”¾ç¤ºä¾‹ï¼Œä½ æŠŠ src æ›æˆä½ è‡ªå·±çš„æª”åå°±å¥½ï¼š
  { title:"ä¾†ç¦ 01",   src:"assets/raifu-01.jpg",  categories:["raifu"],  tags:["heart","bling","pink"] },
  { title:"è‡ªæ‹ 01",   src:"assets/selfie-01.jpg", categories:["selfie"], tags:["bling","pink","white"] },
  { title:"æ—…è¡Œ 01",   src:"assets/travel-01.jpg", categories:["travel"], tags:["blue","undersea","fish"] },
  { title:"æ—¥å¸¸ 01",   src:"assets/daily-01.jpg",  categories:["daily"],  tags:["polka","yellow"] },
  { title:"å¦å®¹ 01",   src:"assets/makeup-01.jpg", categories:["makeup"], tags:["bling","pink","black"] },

  // ä½ å¯ä»¥ç¹¼çºŒæ–°å¢ï¼š
  // { title:"ä¾†ç¦ 02", src:"assets/raifu-02.jpg", categories:["raifu"], tags:["heart","blue"] },
];

const TAGS = [
  { key:"all", label:"å…¨éƒ¨" },

  { key:"raifu",  label:"ğŸ¶ ä¾†ç¦" },
  { key:"selfie", label:"ğŸª è‡ªæ‹" },
  { key:"raifu",  label:"ğŸ¦´ ä¾†ç¦" },
  { key:"selfie", label:"ğŸ“± è‡ªæ‹" },
  { key:"travel", label:"ğŸï¸ æ—…è¡Œ" },
  { key:"daily",  label:"ğŸ«§ æ—¥å¸¸" },
  { key:"daily",  label:"ğŸš¶â€â™€ï¸ æ—¥å¸¸" },
  { key:"makeup", label:"ğŸ’„ å¦å®¹" },

  { key:"bling",  label:"ğŸ’ äº®æ™¶æ™¶" },
  { key:"heart",  label:"â™¡ æ„›å¿ƒ" },
  { key:"polka",  label:"â€¢ æ³¢é»" },
  { key:"fish",   label:"ğŸŸ é­š" },
  { key:"undersea",label:"ğŸŒŠ æµ·åº•" },
  { key:"leopard",label:"ğŸ† è±¹ç´‹" },
  { key:"denim",  label:"ğŸ‘– ç‰›ä»”" },

  { key:"pink",   label:"ğŸ’— ç«ç²‰" },
  { key:"blue",   label:"ğŸ©µ æ·ºè—" },
  { key:"yellow", label:"ğŸ’› å«©é»ƒ" },
  { key:"black",  label:"ğŸ–¤ é»‘" },
  { key:"white",  label:"ğŸ¤ ç™½" },
];

const pageSize = 8;
let currentTag = "all";
let currentPage = 1;
let filtered = [];
let modalIndex = -1;

const grid = document.getElementById("grid");
const tagFilters = document.getElementById("tagFilters");
const pageNums = document.getElementById("pageNums");
const counterText = document.getElementById("counterText");

const modal = document.getElementById("modal");
const modalTitle = document.getElementById("modalTitle");
const modalImg = document.getElementById("modalImg");
const modalMeta = document.getElementById("modalMeta");
const mOpen = document.getElementById("mOpen");
const mDownload = document.getElementById("mDownload");

function esc(s){return (s||"").replace(/[&<>"']/g,m=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[m]))}

/* ========= Click sound (WebAudio) =========
   æ³¨æ„ï¼šç€è¦½å™¨é™åˆ¶è‡ªå‹•æ’­æ”¾ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡é»æ“Šæœƒè‡ªå‹•å•Ÿå‹•éŸ³æ•ˆå¼•æ“ã€‚
*/
let soundEnabled = true;
let audioCtx = null;
function ensureAudio(){
  if(!audioCtx){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }
  if(audioCtx.state === "suspended") audioCtx.resume();
}
function bling(){
  if(!soundEnabled) return;
  ensureAudio();
  const t = audioCtx.currentTime;

  const o1 = audioCtx.createOscillator();
  const g1 = audioCtx.createGain();
  o1.type = "triangle";
  o1.frequency.setValueAtTime(1200, t);
  o1.frequency.exponentialRampToValueAtTime(500, t + 0.08);
  g1.gain.setValueAtTime(0.0001, t);
  g1.gain.exponentialRampToValueAtTime(0.12, t + 0.01);
  g1.gain.exponentialRampToValueAtTime(0.0001, t + 0.12);

  const o2 = audioCtx.createOscillator();
  const g2 = audioCtx.createGain();
  o2.type = "sine";
  o2.frequency.setValueAtTime(1800, t);
  o2.frequency.exponentialRampToValueAtTime(900, t + 0.06);
  g2.gain.setValueAtTime(0.0001, t);
  g2.gain.exponentialRampToValueAtTime(0.08, t + 0.008);
  g2.gain.exponentialRampToValueAtTime(0.0001, t + 0.10);

  o1.connect(g1).connect(audioCtx.destination);
  o2.connect(g2).connect(audioCtx.destination);
  o1.start(t); o2.start(t);
  o1.stop(t+0.14); o2.stop(t+0.12);
}

/* ========= Floating stickers ========= */
let fxEnabled = true;
const floatLayer = document.getElementById("floatLayer");
const stickers = ["â™¡","ğŸ’","âœ¨","ğŸ«§","ğŸŸ","ğŸŒŠ","â€¢","ğŸ–¤","ğŸ¤","ğŸ’›","ğŸ©µ"];
let floatTimer = null;

function startFloat(){
  if(floatTimer) return;
  floatTimer = setInterval(()=>{
    if(!fxEnabled) return;
    const el = document.createElement("div");
    el.className = "floatSticker";
    el.textContent = stickers[Math.floor(Math.random()*stickers.length)];
    el.style.left = Math.random()*100 + "vw";
    el.style.animationDuration = (8 + Math.random()*10) + "s";
    el.style.fontSize = (18 + Math.random()*18) + "px";
    el.style.filter = `drop-shadow(0 0 14px rgba(255,63,216,.18))`;
    floatLayer.appendChild(el);
    setTimeout(()=> el.remove(), 20000);
  }, 420);
}
function stopFloat(){
  clearInterval(floatTimer); floatTimer = null;
  floatLayer.innerHTML = "";
}

/* ========= Mouse trail ========= */
const trailLayer = document.getElementById("trailLayer");
const trailDots = [];
const TRAIL_N = 16;
for(let i=0;i<TRAIL_N;i++){
  const d = document.createElement("div");
  d.className = "trailDot";
  d.style.opacity = "0";
  trailLayer.appendChild(d);
  trailDots.push({el:d, x:0, y:0});
}
let mouseX = 0, mouseY = 0;
let hasMouse = false;

function onMove(e){
  if(!fxEnabled) return;
  hasMouse = true;
  mouseX = e.clientX; mouseY = e.clientY;
}
window.addEventListener("mousemove", onMove);

function animateTrail(){
  requestAnimationFrame(animateTrail);
  if(!fxEnabled || !hasMouse) return;

  // follow chain
  let x = mouseX, y = mouseY;
  for(let i=0;i<trailDots.length;i++){
    const p = trailDots[i];
    p.x += (x - p.x) * 0.28;
    p.y += (y - p.y) * 0.28;
    p.el.style.left = p.x + "px";
    p.el.style.top  = p.y + "px";
    p.el.style.opacity = (0.55 - i*0.03).toFixed(2);
    x = p.x; y = p.y;
  }
}
animateTrail();

function setFX(on){
  fxEnabled = on;
  document.getElementById("toggleFX").textContent = on ? "âœ¨ ç‰¹æ•ˆï¼šé–‹" : "âœ¨ ç‰¹æ•ˆï¼šé—œ";
  if(on){ startFloat(); }
  else{
    stopFloat();
    trailDots.forEach(d=> d.el.style.opacity="0");
  }
}

/* ========= Gallery logic ========= */
function buildTags(){
  tagFilters.innerHTML = "";
  TAGS.forEach(t=>{
    const b = document.createElement("span");
    b.className = "chip" + (t.key===currentTag ? " on":"");
    b.textContent = t.label;
    b.onclick = ()=>{ bling(); currentTag = t.key; currentPage = 1; render(); };
    tagFilters.appendChild(b);
  });
}
function applyFilter(){
  if(currentTag==="all") return [...GALLERY];

  // å…ˆåŒ¹é…åˆ†é¡ categoriesï¼Œå†åŒ¹é… tags
  return GALLERY.filter(x=>{
    const cats = x.categories || [];
    const tags = x.tags || [];
    return cats.includes(currentTag) || tags.includes(currentTag);
  });
}
function pagesCount(list){
  return Math.max(1, Math.ceil(list.length / pageSize));
}
function pickSticker(item){
  const cats = new Set(item.categories||[]);
  const tags = new Set(item.tags||[]);
  if(cats.has("raifu")) return "ğŸ¶";
  if(cats.has("selfie")) return "ğŸª";
  if(cats.has("selfie")) return "ğŸ“±";
  if(cats.has("travel")) return "ğŸï¸";
  if(cats.has("daily")) return "ğŸ«§";
  if(cats.has("makeup")) return "ğŸ’„";
  if(tags.has("bling")) return "ğŸ’";
  if(tags.has("heart")) return "â™¡";
  if(tags.has("fish")||tags.has("undersea")) return "ğŸŸ";
  if(cats.has("daily")) return "ğŸš¶â€â™€ï¸";
  if(cats.has("makeup")) return "ğŸ’„"
  if(tags.has("polka")) return "â€¢";
  return "âœ¨";
}

function renderGrid(list){
  grid.innerHTML = "";
  const totalPages = pagesCount(list);
  if(currentPage > totalPages) currentPage = totalPages;

  const start = (currentPage-1)*pageSize;
  const pageItems = list.slice(start, start+pageSize);

  pageItems.forEach((item, i)=>{
    const realIndex = start + i;
    const tile = document.createElement("div");
    tile.className = "tile";
    tile.onclick = ()=>{ bling(); openModal(realIndex); };

    const badge = document.createElement("div");
    badge.className = "badge";
    const catLabel = (item.categories||[])[0] || "GG";
    badge.textContent = catLabel;

    const sticker = document.createElement("div");
    sticker.className = "sticker";
    sticker.textContent = pickSticker(item);

    const img = document.createElement("img");
    img.className = "thumb";
    img.src = item.src;
    img.alt = item.title || "work";
    img.loading = "lazy";

    const cap = document.createElement("div");
    cap.className = "cap";
    cap.innerHTML = `<b>${esc(item.title||"æœªå‘½å")}</b><span>#${realIndex+1}</span>`;

    tile.appendChild(img);
    tile.appendChild(badge);
    tile.appendChild(sticker);
    tile.appendChild(cap);
    grid.appendChild(tile);
  });

  counterText.textContent = `${list.length} å¼µ â€¢ ç¬¬ ${currentPage}/${totalPages} é `;
}

function renderPager(list){
  const totalPages = pagesCount(list);
  pageNums.innerHTML = "";
  const max = 7;
  let left = Math.max(1, currentPage - Math.floor(max/2));
  let right = Math.min(totalPages, left + max - 1);
  left = Math.max(1, right - max + 1);

  for(let p=left; p<=right; p++){
    const b = document.createElement("button");
    b.className = "pageBtn" + (p===currentPage ? " on":"");
    b.textContent = "Page " + p;
    b.onclick = ()=>{ bling(); currentPage = p; render(); };
    pageNums.appendChild(b);
  }

  document.getElementById("prevBtn").disabled = (currentPage<=1);
  document.getElementById("nextBtn").disabled = (currentPage>=totalPages);
}

document.getElementById("prevBtn").onclick = ()=>{ bling(); currentPage = Math.max(1, currentPage-1); render(); };
document.getElementById("nextBtn").onclick = ()=>{ bling(); currentPage = Math.min(pagesCount(filtered), currentPage+1); render(); };

function openModal(index){
  filtered = applyFilter();
  if(index<0 || index>=filtered.length) return;
  modalIndex = index;
  const item = filtered[index];

  modalTitle.textContent = item.title || "æœªå‘½å";
  modalImg.src = item.src;
  const cats = (item.categories||[]).join(" / ") || "â€”";
  const tags = (item.tags||[]).join(" Â· ") || "â€”";

  modalMeta.innerHTML =
    `<div><b>åˆ†é¡ï¼š</b>${esc(cats)}</div>
     <div><b>æ¨™ç±¤ï¼š</b>${esc(tags)}</div>
     <div style="margin-top:10px;"><b>è‰²ç³»ï¼š</b>ç«ç²‰ / æ·ºè— / å«©é»ƒ / é»‘ç™½ âœ¨</div>`;

  mOpen.href = item.src;
  mDownload.href = item.src;

  const ext = (item.src.split(".").pop() || "jpg").toLowerCase();
  mDownload.download = (item.title || "GG") + "." + ext;

  modal.classList.add("on");
  modal.setAttribute("aria-hidden","false");
}
function closeModal(){
  modal.classList.remove("on");
  modal.setAttribute("aria-hidden","true");
}
document.getElementById("mClose").onclick = ()=>{ bling(); closeModal(); };
modal.addEventListener("click", (e)=>{ if(e.target===modal) { bling(); closeModal(); } });

function modalPrev(){ if(modalIndex>0) { bling(); openModal(modalIndex-1); } }
function modalNext(){ if(modalIndex<filtered.length-1) { bling(); openModal(modalIndex+1); } }
document.getElementById("mPrev").onclick = modalPrev;
document.getElementById("mNext").onclick = modalNext;
window.addEventListener("keydown",(e)=>{
  if(!modal.classList.contains("on")) return;
  if(e.key==="Escape") closeModal();
  if(e.key==="ArrowLeft") modalPrev();
  if(e.key==="ArrowRight") modalNext();
});

function render(){
  buildTags();
  filtered = applyFilter();
  renderGrid(filtered);
  renderPager(filtered);
}

/* hero buttons */
document.getElementById("btnRandom").onclick = ()=>{
  bling();
  filtered = applyFilter();
  if(!filtered.length) return;
  const r = Math.floor(Math.random()*filtered.length);
  openModal(r);
};
document.getElementById("btnTop").onclick = ()=>{ bling(); window.scrollTo({top:0, behavior:"smooth"}); };

/* nav */
document.getElementById("navWall").onclick = ()=>{ bling(); window.scrollTo({top:0, behavior:"smooth"}); };
document.getElementById("navAbout").onclick = ()=>{ bling(); alert("ä½ å¯ä»¥æŠŠã€é—œæ–¼æˆ‘ã€åšæˆä¸€å€‹å€å¡Šï¼ˆæˆ‘å¯ä»¥ä¸‹ä¸€æ­¥å¹«ä½ åŠ ï¼šè‡ªä»‹ï¼‹å–œå¥½ï¼‹å°å°å¹´è¡¨ï¼‰ã€‚"); };
document.getElementById("navLinks").onclick = ()=>{ bling(); alert("é€£çµå€å¯æ”¾ï¼šIG/å°ç´…æ›¸/ä½œå“é›†/Spotify ç­‰ï¼ˆæˆ‘ä¹Ÿå¯ä»¥å¹«ä½ æ’ç‰ˆæˆå¾ˆåƒç¦§çš„æŒ‰éˆ•ç‰†ï¼‰ã€‚"); };
document.getElementById("navContact").onclick = ()=>{ bling(); alert("è¯çµ¡å€å¯æ”¾ï¼šEmail/WhatsApp/äºŒç»´ç ï¼ˆéœ€è¦ä½ çµ¦æˆ‘æƒ³æ”¾çš„æ–¹å¼ï¼‰ã€‚"); };

/* toggles */
document.getElementById("toggleSound").onclick = ()=>{
  // ç¬¬ä¸€æ¬¡é»æœƒå–šé†’ AudioContext
  soundEnabled = !soundEnabled;
  document.getElementById("toggleSound").textContent = soundEnabled ? "ğŸ”Š éŸ³æ•ˆï¼šé–‹" : "ğŸ”‡ éŸ³æ•ˆï¼šé—œ";
  bling();
};
document.getElementById("toggleFX").onclick = ()=>{ bling(); setFX(!fxEnabled); };

/* start */
setFX(true);
render();
</script>
</body>
</html>
